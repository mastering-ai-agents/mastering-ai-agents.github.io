<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Appendix A: Specification-First Toolkit - Mastering AI Agents: From Vibe Coding To Specification-First AI Engineering</title>


        <!-- Custom HTML head -->

        <meta name="description" content="AI coding, vibe coding, agentic AI, AI-assisted, build with AI, coding assistant">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
        
        <!-- Clean session-based password protection -->
        <script>
            const ENCRYPTED_CONTENT = 'eyJzYWx0IjoiRVpRK0FsMjEwOTRIYnNVU1Q0aU84QT09IiwiaXYiOiJWZHliZjBEdU1aaVQzcG1HIiwiYXV0aFRhZyI6ImlSVjJXVGp6YnN6MVhnUm95dlA5ZXc9PSIsImVuY3J5cHRlZCI6InQ0OWZsRHZjR2Y5c3MxV0Z3RmJ4aXRheXY0UXFWQkxSNGFZK2F3VENXMUFWaU52a0Vyclg0UnBnb0ZuNENlRFBNVmlETzFoSC9RdVc2VXkvMnNYeStiWnlRZGhralRwM3k4Rm1YVDV5ZVdLS04yU3hnMzMrdm9aRDArQnZHZWxHRWRkd3kycDVnWFlLbjFXTU11RkJCQXNRaFdlZzl1UWdFbm91anN1WktGNWZaUEVvUExJSGFMcm81Yy82QWp3cHp1Z1pwME5DRTRycTFjVU1qcTUvTFJLNFNZOEdxMmtvMHNIWE9ySXdBSThnSVQ0MTdQT05OSDJCSndnNGpPTlYxelFYbzZGTVZkTUU1aHVlVTE5YWxLeWhuVGJ5ZlZGNGVLTGNpZmNYQ1htd0tYaFdCY01uR1BCUzZqeFRZMDJTNm9XNEFGazEyS2o1WEJKN2o0dE1neW9rK0FyZjFpcDdzbTRDK29lUTdQa3RkNWQ4WHlBdGFBaEpJckZxVXA4UWhCcEdVaFJ2cklzS1JCMU9QRzlFazd0NS91akxjNngxSm5aUnJPRjc1T2lzbFlXT3ZqTlI4Q3pEdHIzcnV4WlhZNlpEaG5QQ0F0bFY1bC9oSWxPRWJtVEkxSnl4Zm8vUDNOQ29IQlpPV0FjNXZ0YXJ0RlVEUGlKRzNrY0Nld0ZJSmU3Q0tHdzRTT08zOGZWUmpUZGg5UXQ5YU00dkxWR0tNWk5jNVpGd2tma3A1cnBLZ2JIQ1oyUWlvNXJvRG54ZjVSUHpQMGRIK3d2WUFXamo0UGNkNUVCNHhvV0dvODI3clpYVmNCaWgzRnIwWU1xTXZUL0J4T0tOVnRkL3RZNHZoY3krYS9FMXg2UU9rUXlwdEN0Z2RZU0JqVjJkUjVGMFRVakVQUjNhQnZOV2J3dzZNUzExSVc5Y3JTbDdzYjl4dVVqanV6ai92aTgyVHlMb2ptMlFESit3aTNjYzRNb1M3NlE3ZE0zWWNtRDRiTDEvL0ZKekR2UTNMQ2cyM2FwMEExcm1vazZzaCtVdmE4TkdkQXlKanNUaFlKeUNLZDlwUGRKRmJrUHdqWHBRNzRCdmlYU0ZyZ0FhL2VPdEtPdUI3c3BEeUlRdGFhYVUvOXF5cFlPeTZ0azBRYUdOSTlWdEpyRFlNbyswYnhKd3BqN1JHVVkva2kwZzcxc05zYkxyNG03Rzk1Tk42Y0pkeVZmd05Id1JUWnVLQVRzcExseGdUZUlvSTV1RkJKNFcxaHBuemN2cWpFZ2NBQlJhTnJ5Ymc2TzZGd0hCck4xL1ZyNHFmWVlSbWZYTXFyeVJhdko1ZlRUMWNkdkdXRHd4TzJpSDhQMElsTzN6cUdTbWY0cGdaQ0FtSE9UMnJTMTRlN2dZR0U1K0d0U2daaUhnRURicmsxcjdlTTJ1dzEyV2NCMkdza083bzZxM2tEQ0J5aFBqWkM1RjgyUGRlOCs3U0FQVmJEU3FYaExvdjE0SFZQd25EVVlZWEJVVmp0alJYdTllcG9iM1djUGY1OWlmVWtlYVZNYWRiMXhyT0NuQXNaOENxR0h4M2l6cXZVSUsyZmtiZHcveUZ3RFZLdXcyQm5pQlV3STF6U1RWS1FBeDk2eXhHVlNLdEdEYUFEWWFOUlZqZ3JDYzdZRXNtdlozZnM2U0d5QzJibFUwdXBLVTVyRDVQZXEwTTZBY3JGMUI3TmdKVGpkNlptSE5iUTZMUTB5WVE2czJTVHRjWW5NdTNHK1NkY3JZYWxUREt0cmJjS3pCQ3UyZW9HZElDclZNWWxnTGg3VE90RUVLRE9lellac3hrOUZaV0d5Mm5WaXhRZ1N0ZjkwM2NFSzhmelBCZTdzRDRqeHY5c0thbUxMQUJlc1NzZlo0bGwxMWlJZFlJVkNITVA3L0hLL01BaE5vcE05d3N5dEtORzJmRXk3MS9pVWIrSFhZWnhZVmZTOTJTR2M0MUxVTHVZNnJkZnl6cHpybzZ4eTJiNnRxU2lTZ2ZxSCtwVnQwQUxPVDdHUktKK1M2VkxmNGRXR0pUSEJNa0ZsdGJITnZYVytKR2o4WGhuQTdMc2EyRmMvM3IrQVp2bFoxNUxVUmFJMzZBbWcrbWpiUEN2VVJ6dGtjSklxSTZiKzNESCtmRC9MWnRDSDQxL0RYSGRoRnJvcG04MWxwdUExYmc2V1EzS29mc2xYVWVhS01oOVlPVVBtcWVUb2cxNE9OLytsdm5BcFlXT1I1YkRET09heFpscW5iNjZya28vdEY5OGJyOTlDbUIwNGQxRGxSTTN3TFc2ZnJEMDk0TnVMcU9lRjMwRVNRbHZuMG5mMkZUR0M0QUxqeUtuOWRoUXUzY0Z6SGNvaU9HTDUvNDNKNXUvTmorTlBRU3c2dmZROUNxdXVyL3BvRmxPc2hvck8wcm11UE53QVh0YWhPTHZXbjZ3Z1ZjS3p5Ti9OMFJLR2dUT3F2YnpVandyMVNYU0ZURm1kV2g1V1ZWWnpYemtyVEJBUlJZMGNTM3ZaSUZQUE1DU09NdjRJeGZmc09WNVVjd3U0NmtTekRoVGNZb2x5QmFWamNoRlFXS09qb0VXS2xWN1JUZU9HWjhGRUg3N1Q2RXVxeDZJaGpnODBuRTJldFk1TVE5YkEwUCtEbnZuY2RFczArUzAvbDR2R3FzZnhpSkJPTzRQTkVmSk5XKzdWaWNuUkJ3dmx0N0MvVk1YZGRBY3B3MXQ3UFBpUWVkL1loM3FvUFhEUTdRaFdHZzNBdWhFeE5tL0R3TlE2L0FIaWRYTkFSQ0FwK0t3NDN0L2sxN2tsQlZTS2JUSFdGZU1BNktMRTR5Y3JaYWx1NkR3T2llSzRNWDYxblFnME9EeGRyOTRsejZYU01tbWNvL2hlaFRGMEoyUXVpcm82ZjRIOUtaMlZLMUJXbnZIQ1ZrM0JXNWphUExsZ2IwTlFmTHRSSnJYTmFzQk1iMk9vWUtYZDl0RmRtcDVEVlQ4U2NXZG9mc0V3RzRZRkNuNzQ0VWN6ODZpOE5WenpVT01aT2gxa2IrNTZIN2huMXNlaUh6bmxTbktoWGhLQ1gydytWSWUybVRLWjlGOSttS0gzR3hmcXBpTXNFWGtSVHRHaDhJL2gvVS96R2JiSVR6VWY3YmoyS1d6U05adzNyakJGL3RtMktmUFZEY1FLdmx3UW5EdXFZYnZxMEdnQkhWbm1vTmJISVBGL3FqWlVXZ2ZwNHNteFplSUY5amlwR2Z2elYrYk94SmJXOUlOak51T3g5dGVkZGE4MDByQkkrWWpvNGxLelE0YnhTYXo0TWJRVThFV3pkaGtpeUwxY1p6TVM5dDQySjVTYjRROFk5WHB5U2hqa0dZc1pKZDkzMEVYbnNzN1huZDE5NGpvcnl1VHMreTVkTGoxZm8vS3YzbTlQWGc0Zk9mdHFGLzRBSFpaU2trZ1VRemE3cE5iMHp2Y1JWVk1pSXVhZWdCdFVaSXc0UEdNYU9aODBZOXdwVnhRWm1uRWFWWEUzVlRwRitId0Jka05rS094SDFWbWpyMFBCTWd5Z2tEKzl3VXRWb2dHVmJVMkxvaXdyejZ2R3lMTUsxVjdVNWtCdUVwdC9xeWdvSVBrYmJuOXZ0YXM0bDVZSGIvNy8zWVlTdzlsTnNDNnR5eUMrTks3TGI4N2VldURPVFJsSUZjbWJjR0N3VENyMVU2dmpDZmdJZ28yYngzT29FWGFTTFAvSG81ajJ6WnRGRFcxdE9xVDlKQVdoRFVWK1RIS1BsTktlMHR4VzBKMndvN3ZHdTZMUlNZaFdTZ3EySnhSYytqOTBuRTJkUjhyb1JoR1U0UTM3bE9MeFVUYWpCWHV2T25udzFNT0RmZlEvQW8yQS9sSDY1WVZxTkFpR2o1ZWJ0ZFV5Nit1TGNmd0NCZkhQdEJYVEhZdk1NMno0Yi9ZNXpSUzdSZGNRTEJEMnBzaVV6Nk9zNjdFSTYyTW5rVzErb2NMTVN0b0EzMEJGbjV3UVlCNUVBOGYzOFd0Vi92V0JFdjY3THZkZTN5RDZoUkFnaGR5VHprS2tDNXdTbUZqcmtnbDY1MkVnRDJUL3JKWDNTU2ZielA3TlVTemkvdWhyNnJzbFZtQnFFaFhzbGc5S3VTc3c3bmlPMUhycmZZenNUZk1wUTRoQzhWeThRRTBxQlVncFVMMDkyemhVVDl0U09uQkMzQzQ3dlJsT3hvb0Nacm5xREUwVlJDaXFVR2xOTy8wcmpLMlh1UHh5UTJub28reHpHYzNGTU1vQjgzN3FiK1VWT0N5ZDVZWlh4ZFI5N2pUWlFQdisyYmNqaGpCeVZMQytzM3JCbWtpK29NS3p3LzZuSncwWEVrbnZLdnpoWFVwU2ppU01KbE1yWWgwOHVDdDZac1hBNWoyaWpZOFZzSVVLQ3VHYitQejltdGR2NlZtTmd5Um9pQlBXT3QvVEtibjJIYVh0V0FDTEhqRVN0NHFCYjZYMEN0WlE2c2RpclZrVDVEZThXN1dmZHN2U0hSbWR0L0hZcUlhWXprdmhNY2N4bk9reFRlRXBTa0QyZWtTVnEwT3NLUTExV3pNam1lT1plSk5yWC9BV21qVU90Q3NqWlVJS3JJMm9zdEJlS0R4Qk9zQUN4bnZXSmlGTzU3dXRoWC9BNlNCOTFOS0QzN1NCMjJCdkNPcWhTWmEyR2NLV3dja3c4WnpPaENUQWpoUzFPbm0ydWRybDJtb1U4bFJGTUJsRE1XRmFkMzY3SW0zejdUd1BhQlhlUGdYQy9MTGs1emZIZEExaDdOZFNhWnNOSncvbzBaZjVXYjJaU2lXQ1JRZGJGbHNzWFc0V0hGb3V1M1V3U2RUTHJvemJoSlVmd05QNmpwOXB4YUN6MDlZcUdxSjhWeWtqa3J3ZUNwOFV4b1ZpeFlJbFZ6YTFQdW95MmRSYVZFcWVRTVdKUlFUUGtaV0NsUk11dDVwMmd2QjBEWithVk9qR1k3aUEwOW1JUmRpY0JvSlBvb0hDcm5ScGtYdGhjdGlVblpIS1hKYmVTcWtDQUkrbHV4R2MwVHdaTGVwcE9IcGdBRUIxamxmdkJqZHJ0KzYvNklSNXM1VzVqeGtETWFuY0hZNW05M0VPY0xIdFAzVHdLcGRuVmZTeDhKOXFsT0Z6ckdzQ3NqWEZPWVlmZEVJSzg4L0JsNWR2azdzeVhteElVMFdrUk00UWV1VGtjWnY5Wis0bExmUzRCbUxUbmNqbWFhMnpOcEVwL2o1MjdtUisvbEE3b09nREQxczZzQzd6L3NqdWdwanVqdmlzS2RCVHc2anlVb2RiVWxKTlp3SThXd3BVMUVwQXNhYWlSV0w0akk0ODc1MFYzdS9zZXQ0b2lsdXJNSkIyMHY2SGREaHJuV0h2SG5qWGM1Mm95YTR4bGl1cW1OMFFYc1dicTNDbEtndlhNc0hqUmtsdkx6ZkMrWWdXYVU0cStISUpqdUZmVnRESkhONWV3WEFhZFVUYWw4SXJ0ZmllVUtmR2pkMDcreWNYSFc0OXBsbVhMODVDNXp5TnNnb2hkeFd4QmZKY1ZqTWo3dEd2UU93Y0s0VldyYUsyZlM2dzlqYVBrMmpNUmFwZ1QwRHcxL3ZmRmpjSFkzcndjVGxXTEJ6Z0ZhMEpnYmJWUjZ4dkRxdmdYd0kvRkxwZElNelVCL2gxS3p6RTQxNHlwZE5TWXoyR2x5ZGJlYjhGVzF3Sng0NmNTeHpkTzdxZUtsdms1eTBFTnFqcEUrdlJNVlBtSEdzQXR6bWhQQng2WGdTR0MrdmZLN0Y0VkdRbU85SXlWSDVIYUpRUUlqZDhUNlF2T29zZmhwaHM5dGUyTXNQeC82bnVMYlNLL3NkRGpiOUN4TXRFQnUyT09jN05ab2xEdXpIbzNCNzNzN3JPUVJ5aklnSGhmK2RnaXhtQjQzOTdGQ2tNR2pXenpOYytJQ3dWTGJRbVBiRmtlamJ4amc5NzFLUnVHZUNXWC8xWGFkUGhqaENvVTMrL2diOFk3dGhEeHZaMDg1U0M4RmtGWTBuS2RhcDJaaUxGcHVpc0tRc1ZXd1oraUFVUFNKa0o0end6dUt0UFlMQ2JWNnAxZlNRcEt4VGt3cHZKRlVmNFlWYTRiUFlsN1h3S3R1V3F3NEFtRGl2TFNqb0F1aVgyMUxScHJmUFpSUHc2TVk4bnJiRW1JRmxGbnpZR0dsaWpjZTZOU2lrS040azUwOVBBUUJYSmkrbkxZTjNPLzZZVHUzaFd0TlF0c0NUQTRWRHhCQTBiMW5Icm5YR0J1emFyL2ZsWmJTdSsyWjBocEdkQmVYWS82WHVlUVJBMnY4cS9Ra0drdkZjcGpZQjBDTzIzT1U1M0ppTlVtZmJvcTI2cFJldmZZSmpVNHFnSFF6TnJOVWxhdG5KL3ZPUFNjNzRGQjB0em4zUVdmNW1DeDVPaldGMThWY1VnWmJPLyt2WFAzY3pNcWh4L3dGUzdlekk5ajBwWXdna2dZVDhJcUpVSlpQUEsrckdpY2pncDg5VlVFbndxUnMrQ3lPZ3Yxek5yVW91RzkrS3l6elo0MXA1S3BEdVNRWTJaWXNGQWFNQktyQUpZTDFRRHl1TjdGYmNnSDRVTUJaaFErWTU4OXV3OGVOYmlBbTRLTVJPNWE5QWF4NXI4VlVaNTdrRFpwSzBFVzlCRmVaSGcxVzNsOTN3UEQ2SjU0TEFEaTZicFJzQzdxZ1ZLckJYRE85WklRTWdQZGwzQ1A5MFE3TzIzZlJyanRUUitMeEFsKzN3NXM5WWdZSWY1eWRDSmVUVTBVOVVDZVdvWCtGK2pNWDB6LzNKSWdVU1RneVVGTXVHS28zWStxUEs4Z20yRmhUcGtBOE1hb0tPQytybTBNNG5yZmFzVEJqcjd3QmJTWHFlUFBjTHJpKzVReGQ4cmVNb1JXWXNPNzZqRUg1SFNNNkRSRlFRUUtKRWpwVGYxS0szZ1JNdUxmYTFKYkliRFcvVXlkTXNyNndUcnVLY21qdXRDUUU1RVF6cUI1c0l4MnlHS25uYnVxbmtHaDNxd0F2TEl4YU1uR3RlRlJGWWgwYmxJTi9tRjFYM1pHOUFCbHVpNzloeWExd0ovVFB0dzV3TFZ0bnJaQVp3N3VadlUxOVlsYjNzMnZIbFVKeEI1QjBpellydEUyeHUrYUxBeldOUWU2QmNLSUdyWFR3dllIMERFSEs5SEc4VUtRelgvNFlvTDBRRnBFNUYyRnhJUk5WQlZBOU1CYUJEWWlFN2RXKzFDdS9YZ3V3SXhJR0gxUXltRlBUa0FLZVR1aTBzVlZLQWVvaElPL1RqaGd0ejhQaVZtcEdGTER1ekZoQXY3NkdMMVAxbDdRYmxlZDFpQ1oyY2IvQktTSlNXYkhEUEtEN2djUHUvbUhQWXp6MmJBVTBpZVh5ZDlIRGJHclM3Ri9CamNtUkxxbUxLUi9HTUVDNEJDZnM0WUpVS1JJeXloR0JydzU2K0VpRW1xNVpZQ0d5Q0RBd2lSNTBJVFVnaEFZY2l5RTVrUzFkeXVReFprb0pBUUI1Nkg1ODZWZGdubS9VZitIS1BSOTdDZEpVVmovV1VhQllPT0liWGpPb1NkTHcvNEZlSEVXTXpwcXJaTVptK0M3cm02Z1NpMmpKeHF1dTBHbFFZS1FMRzdSOHYwZWN3bHhOOGxnRG5RWkNsZGd3QytzRjFaWU91MUVTYjA5a1RFZXBiekhsQjlsRUdIa3M3T0RkaG9NYklzU3JwNjIvcmRHZ1NFb0dVbUxmbHZuQVJwY1l6T0l1S2lCY2JwZG5pVDFUR3BCTENQS2o2Q0hWSG1NcUtjYUI4NHBVNUZVTVR3WTBvODZ2T011UHh1Z1FRcWJPZ2k5UGU4QlNnVXVsMDJUYU0wREt4VllkZVFTaXp2Uk5VUDA4QWF6ZFdrbk1ZWE82bXdqNGRlTzZvaHo3eHBsaXBFTERSTDJiM0p5Z2VwZjhLNHBhVjM2Wjg4RHM1VGF0UlFuWVNrM0M0Z25nSTN0MS85MTJldWJlTWxhbUduMitKMGdPb0IwckZsVG90WGptOWNBMDRXU1cxMnRYaEgwZnhkNFl3RWtaTk12cmdrdmNwaTMveEE5cER3VGIrc2NzVmdMdDZnYXJnTjlrdzhjekdQbktUMWxEVHU2dURKcG11YmJ3VG1yNVhvWUtGcjBMRi9EVEdYTUs5dXQxTzAwcjdFclNKNkRrQU9FcGh1cTJaMGJWRzVWYWtCeUgrSEdkK09uTHM1cXpXREZvN01MTzdyNzFSM1cwWFlPR0VzbHY3cXQzMWdDNmVoY2cyQ1dVdWdVN0F4M2hJY2Jtb09LL3p2eGhWbGxOVHFodVlMaFhUK0Z2SnM3UUhDb0Vnc2dYTW1UZUhVUnJicEphUXBXcHRXR2d0TC9tWXRZZzljRE1sTlVLNlF5WDFBZG5hSGNWQUhCdlhHdFJ1VDdhSzRXUWNQUHJldDFIM1ZkQWlYaGh5aktzaXFOWnZjc3dhNjVod0kvU1U1T2xUMFdaWWcvTzhYYnQ2di9VV05BamJxaXozaWlOMXpybnlzakFYc2ZTVGJKdldCRnluaUFmWFBob2k3UFdZeC9HRVBHbUZpMmdFdW5CR0UrOStWSHhYZUZhOXR4WG9naEhmSktzK0gzN0pIazlrWjBMQ0JlZ0hrb0c4ZFl0emhrQ1hPVzlJUFU5UDNTQ3g4b3Q0UmxTUkI1dTFaSHVyM21IR3pXR0FVNUMxY3VodVZMSkNVWDZwc1BXdWNsNFA5T0Rva1laTHFDbFQvSDlDMzA1VnRuT3JKUm53ckNCbjRmMUQ3R0kzT2JBc3k1bWZocDEwTGFkYWxqblIyOElQaXVjbVo2KzRrWXhwQmtVcGt0bTRIVmJwRU1LdUVRSzg3Rlp4Nkp0N3NwWjYrOGRkZnZzd0MvL2k1UWZzYWp0QWlaYm01OGNyWjRMeFU5NERBQUZLT2s4TlhRS1lvSTE5RWd0NVFzYXhqVGFCaFQvMzdRY0lPWTE3MExZeW14MmxIV0pFdnZ5VXRWc0J1bmlCdENKUE4wVXRVTXlGUGZ6ZzdaRGJTMkNPNVFqTjl2VHBNRXdiUWVVNDdPaklqbDk5bDBjRlU0OGcwRjhKWTZCcmRtSVlBM09qVldLdGhHaU9mLzlua0VLYTlheEVEMEdOUGxSekdQaUZ0TmNKT0IzZStCSXdXQStGTmxzNTluTENKbnl3L1JWSkNRRFNIL2crWEpQUTFSZU1FUkN5RzNGanBrOHpPU1RJdW5ycEVtSVd0bkZWUmJQc3BIeEpCL1VHMzJsdlA2ZHMwMXhQamdlbWxhZGRVL1lKa0pYcGlUVVR0MWxtcmdaRTRPTVVvU0tJZlNTTDZzNzFPbjlCVWIrK0xyRWFyZndHYlp3UHBVZDJvRmZtQ2lQbEhDb3FEamxtNDFZVFVrL3M3NHEwU0pRMlR5OGpQRlBiQTVSN1pSeDVuTkdxcCt6MlFLV1BaTmtyZ3BPekNpZFNyMGpibS94NFRXdzBlRzN5bTIxM1JzRmxVd05qZWtuT2JaVEVEcXdvOG5NeWRQT3ZrNDVLK2tsZkUySmlOZ3RlUGZKdDdnN1hGd2kzYUMrdzRTSHMvRnRBemVjejdvSWsrUit0SjU5dkszdmJKMDZtWSthdG1KT1VjZC95d2NJR1dyaGRocU1nampPOTFsbEpmam1kMjBBam1NbDZ5bFlVVmZQWndzQjEvdCttcjRQWm9qUlg3Y0JzMGZoQ2lMdzRleVlWZnZjMFZPdUl5UFUzTStndlI4V1FsaXI0KytTU2QrQmRtWmxScHg5S1BaTWtFbTlqMS9LcE5IcjVWZFhvalFySjlZc0lZN0xtb1FTeWVyZXJFR3l0ZjUxcGhqUVVucmZMWjI2VStNaFZXWWwxQUF5Skx5RG5sQnlTYjNXRjF6SVR3Mzh4b0YyZENwMU1WNkN2S0c0UTNZdTVXOERnN2ZlcVJpUmVCRU9vU2UxRGpsRklnTlRjWkJwazI4ZmhCNXdnRmNzWHA0a3hzbnV2VmxIeHhJTVpvZDVTMk1iRUdiUVVka0JXS2d5NUtNUUFMWGQ1WW9oNGJKS292UlZmaGtuei9RMXB1aGR3TTRSNFFQR3RaZVd2K2xnTmk3bmxiSkEvb0FkczBmbTIxdEVpeGxoNi9NeFFIalZQRWdxYnZSSU16Qnp0ZWtRYzJ4bkxZOGtwN1llbkhQWUZPVS9MMzVKcnRkaFBLL3lrYzVqUmx3R0V2aWFrcytPcjhqMkV5blRianJhajJNUzVyenAwbWpYL251K2hHcHEwZFVWeHBxLzA0SmxUMnlZVllncXdBYklZRGlZOWxvaFloNWV4MHFWTTNVdGZ4NXBNd1RQQ0YvN2JZOXhjK2R4bm1nQVMwUkRJdWh0YTlQSWh5OVc0ajE2K0lnaVExUm00Y1ZicFpXU1J2ekVYNHI5dEpCQ21PdDNjbE9HU0ZuOGFjMXRRZ1M5YXNBWVdPTE5Zc3B5WGNtMkVsdmdJa010aElOUVk1NWRpdDJiNVM4UE5xM1UzMUVpMGpZbE0yVWRkVTlYUFRUV0lsKzI3SVdmZ3dlL2QrNXA5dm5HalBkcTJTNTFmYjFsT1JtOTlaSmxubjl3YkR1T2dhUVNLVXk5aGtSeTRNYlZKem9rdE9FazA5ZllCYkh6T3dNUjhLQmFPbDZCeUlOankzeWpad3RxTUZoRGs1Q0dzZHUzNytONmdGV2ZSK0UvelVUUGVtNXQzYTdHa25iTmhFdXhQMFVQWmRwMTF6enh5TlMzQUlRQ3VNTnZOeW1LNDBYdlNYanpTMDFJcnVwS0Zoa2VxU01NNlVXbU1yUFNxWTVRVStpbVhWMUlzeVlGQVdnRWZURXhhM3F6UG9vckRNT21IbXRMblJ5M1I0REtSR0xLLzgvTEJKLzBHNkxDRHovc2J1eTlNajBnUjlNZk1rME9zcXppZFhORGtuVTlkNFJrT3hCejdRRG1tbWtXWEw1amV2ZUEwM29ZMjhmaisrMDNDWmtpNUdCVVJoanVFaGc5K1p5alhIUXBBVy82YUtoclRMaUlqUi9LMlBWTkNKbWp0b1RRMUpaZE4ycWI4UzlhWm1DRlFDOUx3dFp5UnNlZ1JIVjZEeFZlZVpGSitXRWFzM3JyNEQwdWhLaGdSSnU1Rm9jOExCZUJESkZNZlVsTDRBNTNVVkwvd2RsOEFqaWtHUjNjLzVJcXRyVllxNkZsMVB2Wm12OHMrSXd1Z2J5b1d1L1ViMFJCb2o2YUsrRkZlQ05jOEUxSWI1VjZnRUU5c281NEZNQWF6RjBFMEdPNmRrUXNLaFc4UDB5azVoVHBPR0ZxUGxtOHo5Tkd6d0xINzhqcjgvRDZHclVlWDA5bU9oaURSbitJN25WTjZwM3FSZnJlayt4eFN3OWdrQStZRkxLTS9qTVJiM1NNQVYxbUNGRU9mRnNyMHNaMFlURmQyaFdOdXNhNldvQWJCV0dmMjVJWlFnMUEwU2g2bm9rZDBCSnhqUlYvWXJ6UjhIUVQxekI5ZXp5M1ZraisxV3ZIK0U1dTRMRFE5MWhWeUg1RnpjY2hDcCtVSldNREIvL0hHTUsvcFJGVUMwTWMyZ0RlbEZuQTVSempQTnNLbGZlVVFTNjNPVTdYeHpTbGpCVmRldXdqV2Z2VHgwdi9pVTM2QUNWZEE3VXlHOU9sVVNSNUJMSFNEcmM2MXAyTXdzc2ZUQVNmQmp3RGE5bjZLcGFiNFhNVmZIcWdUbWhHTzY1UzJvVytBR0xsc2lJeGlrWW51Q2p6WnJIUkJ0ZzFEVUtoUXo0UWpMM29uRS9udHVNdndjZVJDR1V2QURZcCtIa3RweFBsS3Njc0xoSmhVbDg2Y2xRU2JsL3IrdjB1Z216OU1WNmJYL2lQS3BvVm5GWGNHUFRObEV4Slgyc3Q4NzZ3S3dZY1dnZEJOOTE1RUFoTi9JTjRMcytOVGcwajh6eUJ0VkN5TEN2Y3h3MFFYTUxrcFcwelZaemxSU3NaMmx0WDJ5c1NZeFhqS1ZtclR0TGVpeDJaR1dvSGo2Rlk4QWlNMXJnWEd3UnA1WUI3SlQrVTNlRWNsZlVTU0F4Tzc1TWNqaEJnVVA4VmY0NDNUTUQ2Q2ZRdkdyMTF0SFpPT200ZWtHZEtoaEJ0NFZob0tjNW1NZThrNzd0K1dUbThwdWRhb29xVk85QUp2UkJVc1dyM0YwakowRWRhZjNieW9SdmozS2ZDeVNKTjFxZVJ3Z09FS0Z0WnNXQjVWWE5WZDdMYVZiYlpaNjI1VlAwdy85UFJtWFQrVUxGaTN5UjljSDM0Z2JEODROVzdvVFBRcC9iZUhRRUhFV1ViLzhtTDRNK2Fva2d2aVpQNUc1OVpQRHhaK0NMVFFqT1dVblMzQkVITVY5UGQ5RVR5SGNQbS9UajZENEQ3T1FLck9QSlQ4NjhTT2ZkUkZSci9ENmI5NnpiWWpheUsrclYwcUE4dkhpRGxqUHMwTlpLVjNjcDZDSGJ2OU1JZGxuZ0RML2VxcW4zNHZhWnYzMkdoMXVvem1XYzdLdVp1UUxGN2dERCtPZUdIOTBXZUM4WHdic3g5dkJjSFV6MVlxY1BCc2hrVWpNK1c2R05WRWdQdzhNZ2FOQnRISUVJVUMxVXpuMlppMmJSZW9hU0p2Y280RGI5NUIycUJnLzllN2hYQzBmK21YYnI0S1dFN0orR2hBODgvbmY1WFpNSCtneSt1T1NQcW9BR0g2N3VDc1BKSVZrL3QxaDl3WFg5UndHQ2hGNkhqZlRuR3JrVCtRTjUvTFRzV2FBdkgzcGRVanBYb0plL2RQVWFueXhYbmFJTXBkMXMrb1kwdi9Td0daZFNLTmZhT3JtMTZ2R2crMitQbDJWU0pCeEVHQ1BtVmFIWFlsU2dTK3NTb0dQNmEvam5ubkN4RVA5eUpyU29RZXR6WEVwNXdZR2lEZ3ZXZHBJUkRwYUdKbCsvOVZXMTJ0aVBZWGhJTktpR2FFRGZOSVlnL1NCVXBDQWp5RlFUa1FZQk5XRUpWNk13Z2NtQ25SQjQyaE11N2FsTHhyMnJ2L0l5L1NlL0xtMy91em9lczBsdDU2YW5pOFpHYjFINXlDb3R4aWhUYjdkWmdBL3FPaFQ5SUk2TE92Nk5WSDRQc1VZcVIreUdlZjhCWWQ1UG5jR3MxS0w1TVdRRjhiQUlESm5NVTY2YU9JYXdLMExOM0U3NWNNdGZWbkpNb2QrNzM0VTlqT1ZwVWVZYSt5UnNZU25maWhuRUR6Z1FzOVVsTnQ2Tm5nc2dhOWR2OFY1M0VxS3BzSzFRejhkVjFKOGFxOGZVcHJMMy9uQnFMc2xJQ3VTT3VoQWVqNERtTjBTbnRyQXNpcVIwWW00bXNZb2R4dWNFVFIzV1VZaUVkMFU5VmlOZy83VWo1TjRvdzVUcy9BaDJBa3hDdGtGcGFKQk9zc0RvSlZsNGo2UVFoUDY3YUYzVmdBanhUMFZ6c0c5aXVxa0ZUZTJHVGRwQXdSOVhkblYrY001OW12TlFWb3NFbUJ2WWhNVGtyNGZuQzhhdFlyeUtza08ydUVlbXVNNDJ0Mkl0SW5vejRKNjl2UzNvVFJ3ckd4WFRJdk9TWVYyZ3NwN1ZrRFlrdVY0c3UxNjlENTVVU0o4UnE0TkRsbzR4QW85dS9nODlkM0FMS0hLdGxWNzlnOVYvbXdvNlR5TjFHSmRmVmhUZ3lJN0VMNUhXOUl0VU00SllZUzk4YTFiMEc1RWFnY1JNd2VEaEF6dzE4R0JxTmZKZHNpcEpRWllESW5pRTE3SG5TZ3dXUDhIOU0xa1Aydnh6VExPQktTU2piamJmQXhiak1uTG9KWWZrMHFleGpHaEdNWDN0OU9lR3FnZnF0SEZaK3B0UzgxOStUeFVzdC9Pak1Pc2FtRG9ybzZRZkQ1TE5uUWsxL0FTdEk4VnRVUFdVZnVhVXNOQ0d5TXEya2lzMjBJek4vd0FXZHFLVmxwelhLK3F6elRicndkMDR4a3oyemg2bjA0di9lVjFHcEFjRUNOUktLMnkxSkRxWGR1U1pmajl5R0I0Y3FJQ3NnY1hPTUp2SGdWS3ZEMFhhVGFlL2V1Q3IyNGJjaXVDQ0tOTk9qZjRPNU8rTHpZR2poRmFDNGF1OGdTeG8wVlQxTTJ6Ly90bEJSMGdGWGgxeWZJcEZoTC9XZW16K1Q2M0JCazBqdzJqNHk1RFEyUWhaTldOSlFFNVVqRDIwbUF5V3d5NjFsMnNxSHVxNHhsb3VDb2puWDAxZTM2RkhZc0xpanpWdUtmSUorWS9BeStUd0tWR3BqQUplQTIxT1J6UXJRQVNpRmdPQmpyVjFDVC9hUnNkR2NsZ2czb1c0R296NEdEdW9WbzBNNDRrejR6YzcxK0hOS0N5RmNpRDJHOVZHUnRjbStXekNWcXp4NERhSDNNdlp0MmFHN3R1eldCRjhEQlpSVDhZRTVGRWdVSTZqNzJjdnZKWnhqd0V1RjloUzNnSDNIRXQ4TDdWcVBMbzR1aTRLdkZtNTQ3Um5NekNrN1QwZTdNaVFnNzU3TDQwdUhYU0dLY0cxUkJFRUJrQlIwQmRoa0hvdnhzczhjZXpyZXNYK2wrVXpVUGlEQjRhZGRZUS9EaXVuM0MyQ2lsWDJwME5aWHhCRE9PV0VwK2tSaXVzOVFNeVNmQk5acEZKT0ZNR0hNZ1VtOGxtaE0xZUIzbGt5cnY2bkRMSVFXV05WTEg3bm8xbWNLNUo4cFlDaExxOFRMUXlRQ1lteC8xOS9UVDdlY0NxWFo4dDdONEFEbUhmRzhHamFSbm1vaFJnS2NHRmdTcTZhSTNUdXhNUnRLdjRuOEt1R0pXTG1WRTNTbVlpbzVaV3dLS1h6NjVWS25ZbkZoL0pJakViWkQwQjNGNEp6UHBRdHVDc0luR0krb2xFS2l6ZVo1blV3K2dhcnNWYnZsUkJFQ050UEVJTVVKd1hxU2dpTWJWOHU1U0c4RG95a2ZWSXBGQms4YTIvUldOZ0JDVU1BNUgrQlJxTzZRR1hyeVIyUjBpaWRhdGhIRVhYcHhNT010WmxUMk5ZR09LckY5bkVEbGMxT25DRUxYTkx0NUNaNHRkV2IzVEp1c0dlTHNsS0oyR0wvR3ZOcDBRckt5enBmbTBIYktDT3VqYmxlK3d5TjJIY0phV2o2a3NiWlpWY1RtTjh0bG4yVlhDV1EyY3d2UmgxaG5FRmFQSWlVaXhRUjduRkJVR0EvV0FCZG92bE5uWGNjNm5XN0hReDZMNk1SOUdqcHRmOGgvZ0NxdHRIM0hQRklyeDB5RDRKamIyTWhVcmlmdmx1TW1KZy9zVVdob1o1cENXWlBDSzgrZEJ5WjFrSCtPZEx5ZEdxYzgzMVhRZytCOFB5ZGFKTXhLSlNOM3pnTWJMOWgvalM2YzNOSm1lcGJ1RUdNMkY0VzRHY2FlMmxaOFcxREs5cWFyZ3NZSUVickZzUUtKQzYzanNvYWJPbm50TWh0QVdYa0dRaEszNmxmWktsZnJhMHdEbm84RXQ2bEtRcHZmOVNuTnBrcVQxaUorMXVISjkvZ2tnR3ZMOGwxTURDWE5WVmxabFh1cHdnMTI4akkzeXIzbE41bFozdnU0cW9TSUpISGlEYnlWV0lSUzlmY1puU3l5ZWZ2bWRBaUJRMXNTNm9sLzR3WEdJczhEbDE0a2RMbDZmZ1o1eG5IQ0k5TmhHNGZvOVNRY3FJMTNjT3pGdG80MmlXSDV0SVRqVXA4ZTYzL2RPZWNCWU04TVBadUo1dEhsU2k2MVdoc3ZBak1KVUVGQW5XWjdGUGNhWW9GRG1wQnUzemVuN3BTTGJmUERFSDAyUVVKL1B2UFRXQzdEUmJmUVpndUlxWnhRYjhtRzJRYWRtTXNpUzF4ck9TcGpTSTZ3MXZ3MTBZNmRMbkFlcC9oT1NFclB4YkwvUDlWRmJZbW5HRDBaeVdzRlpxMmVVUG9tZytqTmwvYmViYTA2eGRvazVYZS9sK1FZSUxRNTJUSnhGcGlSUTcvTnR3WXkvbFF3T3pWY0RtdTVISk1BVXJxZTdUek45dzR5WVN0NW9Ca1kzRU9RRndDb3BTWnNRMkRtSTZBdzlSa2IvNVJ0bHVCTzJJbTRuYStqV3d5amwrQ3JWbDVyMzNNTnJac0xCWUdpUSs2Und3OGxaVUw4aGlyRW9rQitqMFRwY2RjMFZFdWZSL1RFZzlJZHJzbmVmYmhSRThnODU3dXFCcHdVZ2xGWldrVjFuYWNhd21ZY2s1YitVeHhUVHI4czZTSkxHNWNqa0FlK29UMUh4VkZHOXFaejVDdTJrTzh6a09FbytxT2Z2ODA5WlFzNHJnZDBrV1FoVE5hcEs0WnJjdTdjanE5Y2toZlJGSnozK3E2azRiRFh2MitSVjdPZFAydCtuaE13WVh5ZTZtelhuVTZwVnlQbkUwZkdsYzBWZjNVeTdyNHFadGZsRWRYbHNsYmlEVmNuUGF2WDMyVjM5SUV1UE1YdkpUYWdYVkQ0RE96SHFXN0I5K2c2VW9YUkh6WHJ4dlVSWEoycTVKWk1OVkE2V3ZWWkFiQzJyeFBJcE9qSWVjaFFEaVZkSTk4Q1VxejB1Z2N4SDhCNFhKYnk3eklSV3Zpb3RVQjBRTlcySHl1UTM2ejVVZGZSbHgxOWJVZFpBS1NVNjNBejlRdzZpZEJqcjVIaWpUNVRRbGlUN1E2L2MxQ2l3VHYzcEtBVWlhUlRaWTZzSXN4azJQK3p3L2NnR25QSVlna20xbURHWk1kb3ZFK1Y4VW9yQk5DOTFQU0JHZVdwSGVSZG5xSUI4dTdlaTF5TlI2Q1ozQjZiOEFaL21STFg2NzVma09lRklPNUowVldUMUNlUkYzWXpBMkxzNm9GcEhOUllTUzUwaXN5NlBublJnb3k1QXo0L1RtOStCY2ZRSXEwQkFKRHBQdnBPU3YxZks5TS95TjJhb2dZbDU2SzBGWFVVc2Z5NDZoZ2NoME5yVnNBVHlSaTNuZjUydkZ1UlpkZ3RoOE56eXpYV1M2YUhoMkxvNzNIeEZoQnpCZ2tIVkd1RklWUW9sS2trQXVhSFBVcVFVZzdJSnNqYjNEUzFqaFE3b3FERnROSXUyTGpmeG4vZEF0eElndXFjN2tlcEJXQmtpWU9aUm44NU5iK05IeWRhNnE0YUZVR0Q3WUZYRHRkbXVZdlpvUHdsUzhCUmRMZGpMNWJEQlJWQVdOOHlrWStyQU9XZDFmK3J2OU9FbFZRVGVpMlVSdm9IWCs4T2trY05iLzBtL1BmcEl6YVhBbXg1a0FEM1RNZGNIcGNNeU9hdzJNbVZaQk4yaTFFUm9uTmFSMGFUSlJSRzd5bFd1OHMwMTh2RDRCd0tNZW5rTVZzL1VEd0NPQUNmMEdKa1JNRi8vcU01dVdvY05KU1MrUkx5d3p2ZmVpTHhZNTI2SkloK3A3aGRLV2VSWGVVZXNOb3lHYWlCeTYyYzE4L3VtU1E4aXRWTzFxQVNZVkpQcTN6NVphdGVaQ1o4MFFsMGR2VXI0RFlQSVFtN0lLZENwOEU5VjhJdURtRnplUkJlTEpLV2RvN0hCcEpTdDdwenNvTUZVSXhnRDdRQ1JnTFJDWFNjUHRiWXhtbnRMUFk4bEtESXBEb1M3bHB6MmRuMVVKc3RheHEvZ3FvcUtvbFZ5TUJwbHFqY3Q5QzgyVW9iaWxWT0J4ZHlqY0RBamlEeENCQ2ljYmljbEgxTzR0aDVVZ1hkcjhSOTBCa0o0YSsyaTJpOXU0WmNGZ3E5S3VKaU9XVm5tL2d5eXBFZUVUN3JHZmwzTVc4YllmeFVlVldVOU4vRDY1WWV6cE1VcGhLK2kvYlVFa0pRWTV5RTB3QkVrR0tNK1RxZHB6VW1JS1VVTGJDeE9yeEN4M0tlUTl4bFdXbk1qTmpPV3c2Y3czM2xvWkxqYy8vcnBEWmFxemNqMnEvZGZyRUhnZnhvVGp4SC91MDZFdDJ1aHZXWVRTY01pR1FpMm05dUx6VGVyVkNjWjk0dUZpUWl1Qm9FZkFON2Z2bGFpc2tHQXRWTHJ1a2tmRXBJMUl5UFJHTFltV1FhcWxCVWhvRzVWZVBadVk1S3c3S1MwU0Z0RnJGSm9WMmozNitVL0xBdERXTDgzbnpxMDl1eXBTOGo1SkpFMXdlZkFaY1JHelUwa2pyS0p3RiJ9';
            
            class SessionPasswordProtection {
                constructor() {
                    this.contentSelector = '#content main';
                    // Check session storage on each page load
                    this.checkSessionState();
                }

                checkSessionState() {
                    // Check if we have valid local storage data
                    const isUnlocked = window.localStorage && window.localStorage.getItem('book_unlocked') === 'true';
                    const storedPassword = window.localStorage?.getItem('book_password');
                    
                    // Update instance state based on current session storage
                    this.isUnlocked = isUnlocked && !!storedPassword;
                    return this.isUnlocked;
                }

                protect() {
                    // Always check session state first
                    const sessionValid = this.checkSessionState();
                    
                    if (sessionValid && this.isUnlocked) {
                        const storedPassword = window.localStorage.getItem('book_password');
                        if (storedPassword) {
                            // Try to unlock with stored password
                            const unlockResult = this.unlock(storedPassword, true);
                            if (unlockResult) {
                                return; // Successfully unlocked
                            }
                            // If silent unlock failed, don't clear session - just show password form
                            // The password might still be valid for other chapters
                        }
                    }

                    const contentElement = document.querySelector(this.contentSelector);
                    if (!contentElement) return;

                    contentElement.innerHTML = this.createPasswordPrompt();
                    this.setupKeyboardSupport();
                    this.preventInspection();
                }

                createPasswordPrompt() {
                    return `
                        <div style="max-width: 500px; margin: 50px auto; padding: 30px; border: 1px solid #ddd; border-radius: 8px; background: var(--bg); text-align: center; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                            <h2 style="color: var(--fg); margin-bottom: 20px;">🔒 Want to read more?</h2>
                            <p style="color: var(--fg); margin-bottom: 25px;">These chapters require a password.</p>
                            
                            <div style="margin-bottom: 30px;">
                                <input type="password" id="book-password" placeholder="Enter password" style="width: 100%; max-width: 300px; padding: 12px; border: 1px solid #ccc; border-radius: 4px; font-size: 16px; margin-bottom: 15px; background: var(--bg); color: var(--fg);" />
                                <br>
                                <button onclick="sessionProtection.unlock()" style="background: #007bff; color: white; border: none; padding: 12px 24px; border-radius: 4px; cursor: pointer; font-size: 16px;">Unlock</button>
                            </div>
                            
                            <div id="password-error" style="color: #dc3545; margin-bottom: 20px; display: none;">Incorrect password. Please try again.</div>
                            
                            <div style="margin-bottom: 20px;">
                                <p style="color: var(--fg); margin-bottom: 15px; font-size: 16px;">Don't have a password?</p>
                                <p style="color: var(--fg); margin-bottom: 15px; font-size: 16px; font-weight: bold;">Buy it for €4.99 ($5.77)</p>
                                <a href="https://ko-fi.com/s/6f75be9c59" target="_blank" style="display: inline-block; background: #ffc107; color: #212529; text-decoration: none; padding: 12px 24px; border-radius: 4px; font-weight: bold; font-size: 16px; transition: background-color 0.3s;">
                                    Buy Password
                                </a>
                            </div>
                        </div>
                    `;
                }

                async unlock(password, silent = false) {
                    if (!password && !silent) {
                        const passwordInput = document.getElementById('book-password');
                        password = passwordInput ? passwordInput.value : '';
                    }

                    if (!password) {
                        this.showError('Please enter a password.');
                        return;
                    }

                    try {
                        // Decrypt using Web Crypto API
                        const decryptedContent = await this.decryptWithWebCrypto(ENCRYPTED_CONTENT, password);
                        
                        // More robust validation: check if decrypted content is valid and contains expected HTML
                        if (decryptedContent && decryptedContent.length > 0 && decryptedContent.includes('<')) {
                            const contentElement = document.querySelector(this.contentSelector);
                            contentElement.innerHTML = decryptedContent;
                            
                            // Store in session immediately
                            if (window.localStorage) {
                                window.localStorage.setItem('book_unlocked', 'true');
                                window.localStorage.setItem('book_password', password);
                            }
                            
                            // Update instance state immediately after sessionStorage is set
                            this.isUnlocked = true;
                            
                            // Verify session state is properly updated
                            this.checkSessionState();
                            
                            this.reinitializeMdbook();
                            
                            if (!silent) {
                                console.log('✅ Book unlocked for this session');
                            }
                            return true;
                        }
                    } catch (error) {
                        if (!silent) console.error('Decryption error:', error);
                    }
                    
                    // Decryption failed
                    if (!silent) {
                        // User manually entered password - it's definitely wrong, clear session
                        this.isUnlocked = false;
                        this.clearSession();
                        this.showError('Incorrect password. Please try again.');
                    } else {
                        // Silent attempt failed - don't clear session or change isUnlocked state
                        // This happens when navigating between chapters with different encrypted content
                        // Keep the session intact so user doesn't need to re-enter password
                        const contentElement = document.querySelector(this.contentSelector);
                        if (contentElement) {
                            contentElement.innerHTML = this.createPasswordPrompt();
                            this.setupKeyboardSupport();
                        }
                    }
                    return false;
                }

                async decryptWithWebCrypto(encryptedData, password) {
                    try {
                        // Parse the encrypted data
                        const data = JSON.parse(atob(encryptedData));
                        const salt = Uint8Array.from(atob(data.salt), c => c.charCodeAt(0));
                        const iv = Uint8Array.from(atob(data.iv), c => c.charCodeAt(0));
                        const authTag = Uint8Array.from(atob(data.authTag), c => c.charCodeAt(0));
                        const encrypted = Uint8Array.from(atob(data.encrypted), c => c.charCodeAt(0));
                        
                        // Derive key using PBKDF2 with 100,000 iterations
                        const encoder = new TextEncoder();
                        const keyMaterial = await window.crypto.subtle.importKey(
                            'raw',
                            encoder.encode(password),
                            { name: 'PBKDF2' },
                            false,
                            ['deriveKey']
                        );
                        
                        const key = await window.crypto.subtle.deriveKey(
                            {
                                name: 'PBKDF2',
                                salt: salt,
                                iterations: 100000,
                                hash: 'SHA-256'
                            },
                            keyMaterial,
                            { name: 'AES-GCM', length: 256 },
                            false,
                            ['decrypt']
                        );
                        
                        // Combine encrypted data with auth tag for GCM
                        const encryptedWithTag = new Uint8Array(encrypted.length + authTag.length);
                        encryptedWithTag.set(encrypted);
                        encryptedWithTag.set(authTag, encrypted.length);
                        
                        // Decrypt the content
                        const decrypted = await window.crypto.subtle.decrypt(
                            {
                                name: 'AES-GCM',
                                iv: iv,
                                additionalData: encoder.encode('book-protection')
                            },
                            key,
                            encryptedWithTag
                        );
                        
                        // Convert decrypted data back to string
                        const decoder = new TextDecoder();
                        return decoder.decode(decrypted);
                        
                    } catch (error) {
                        throw new Error('Failed to decrypt content: ' + error.message);
                    }
                }

                showError(message) {
                    const errorDiv = document.getElementById('password-error');
                    if (errorDiv) {
                        errorDiv.textContent = message;
                        errorDiv.style.display = 'block';
                    }
                }

                clearSession() {
                    if (window.localStorage) {
                        window.localStorage.removeItem('book_unlocked');
                        window.localStorage.removeItem('book_password');
                    }
                }

                setupKeyboardSupport() {
                    document.addEventListener('keydown', (event) => {
                        if (!this.isUnlocked && event.key === 'Enter') {
                            const passwordInput = document.getElementById('book-password');
                            if (passwordInput && document.activeElement === passwordInput) {
                                this.unlock();
                            }
                        }
                    });
                }

                preventInspection() {
                    if (this.isUnlocked) return;
                    
                    document.addEventListener('contextmenu', (e) => e.preventDefault());
                    document.addEventListener('keydown', (e) => {
                        if (e.key === 'F12' || (e.ctrlKey && e.shiftKey && (e.key === 'I' || e.key === 'J')) || (e.ctrlKey && e.key === 'u')) {
                            e.preventDefault();
                        }
                    });
                    
                    setInterval(() => {
                        if (!this.isUnlocked) console.clear();
                    }, 1000);
                }

                reinitializeMdbook() {
                    if (typeof hljs !== 'undefined' && typeof hljs.highlightAll === 'function') {
                        try {
                            hljs.highlightAll();
                        } catch (error) {
                            console.warn('Could not reinitialize syntax highlighting:', error);
                        }
                    }
                }
            }

            // Auto-initialize
            document.addEventListener('DOMContentLoaded', function() {
                window.sessionProtection = new SessionPasswordProtection();
                sessionProtection.protect();
            });
        </script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Mastering AI Agents: From Vibe Coding To Specification-First AI Engineering</h1>

                    <div class="right-buttons">

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main></main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="conclusion.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="appendix-b.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="conclusion.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="appendix-b.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
